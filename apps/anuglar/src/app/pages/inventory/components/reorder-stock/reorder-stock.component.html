<dx-form id="form" [colCount]="2" labelLocation="left">
    <dxi-item [colSpan]="2">
        <dxo-label text=" "></dxo-label>
        <div *dxTemplate>
            <dx-accordion [multiple]="true" [collapsible]="true" [animationDuration]="500">
                <dxi-item title="{{'Inventory::Stock'|abpLocalization}}">
                    <dx-data-grid #productGrid id="productGrid" [remoteOperations]="false" height="500"
                        [dataSource]="stockAdjustmentLineDataSource" [allowColumnReordering]="true"
                        [rowAlternationEnabled]="true" [hoverStateEnabled]="true" [showBorders]="true"
                        [showColumnLines]="true" [showRowLines]="true" [columnAutoWidth]="true"
                        [allowColumnResizing]="true" (onToolbarPreparing)="onToolbarPreparing($event)" [wordWrapEnabled]="true">
                        <dxo-selection mode="single"></dxo-selection>
                        <dxo-filter-row [visible]="false"></dxo-filter-row>
                        <dxo-header-filter [visible]="true"></dxo-header-filter>
                        <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
                        <dxo-group-panel [visible]="false"></dxo-group-panel>
                        <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
                        <dxo-paging [pageSize]="10"></dxo-paging>
                        <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20]" [showInfo]="true">
                        </dxo-pager>
                        <dxo-editing mode="batch" [allowAdding]="true" [allowUpdating]="true" [allowDeleting]="true"
                            selectTextOnEditStart="true" startEditAction="click">
                        </dxo-editing>

                        <dxi-column caption="{{'Inventory::ProductName'|abpLocalization}}" dataField="productId"
                            [setCellValue]="setProductPriceCellValue" alignment="left">
                            <dxo-lookup [dataSource]="productArrayData" valueExpr="id" displayExpr="name">
                            </dxo-lookup>
                            <dxi-validation-rule type="required"></dxi-validation-rule>
                        </dxi-column>
                        <dxi-column caption="{{'Inventory::Location'|abpLocalization}}" dataField="locationId"
                            alignment="left" [width]="150">
                            <dxo-lookup [dataSource]="locationArrayData" valueExpr="id" displayExpr="name">
                            </dxo-lookup>
                            <dxi-validation-rule type="required"></dxi-validation-rule>
                        </dxi-column>
                        <dxi-column caption="{{'Inventory::NewQuantity'|abpLocalization}}" dataField="quantityAfter"
                            dataType="number" alignment="left" [width]="100" format="#,##0">
                            <dxi-validation-rule type="required"></dxi-validation-rule>
                        </dxi-column>
                        <dxi-column caption="{{'Inventory::OldQuantity'|abpLocalization}}" dataField="quantityBefore"
                            [allowEditing]="false" dataType="number" alignment="left" [width]="100" format="#,##0">

                        </dxi-column>
                        <dxi-column caption="{{'Inventory::Difference'|abpLocalization}}" dataField="difference"
                            dataType="number" alignment="left" [width]="100" format="#,##0">

                        </dxi-column>
                        <dxi-column type="buttons" [width]="70" alignment="left">
                            <dxi-button hint="{{'Inventory::Button:Delete'|abpLocalization}}" icon="trash" name="delete">
                            </dxi-button>
                        </dxi-column>


                    </dx-data-grid>
                </dxi-item>
            </dx-accordion>
        </div>
    </dxi-item>

    <dxi-item [colSpan]="1">
    </dxi-item>
    <dxi-item [colSpan]="1">
        <dxo-label text=" "></dxo-label>
        <div *dxTemplate>
            <div class="dx-fieldset">
                <dx-validation-summary id="summary"></dx-validation-summary>
            </div>
        </div>
    </dxi-item>
</dx-form>